/* src/prototype/css/portfolio.css */
/* PORTFOLIO STYLES - Bento Grid Evolution */
/* Visual DNA driven, Container Query enabled */

/* ============================================
   1. FOLDER NAVIGATION PANEL (Enhanced UI)
   Higher brightness, depth, glassmorphism
   ============================================ */
.folder-tabs-bar {
    --panel-bg: rgba(40, 40, 55, 0.85);
    --panel-border: rgba(255, 255, 255, 0.08);
    --panel-glow: var(--color-gold);

    width: 100%;
    height: 55px;

    /* Lighter background for depth hierarchy */
    background: var(--panel-bg);
    border-bottom: 2px solid var(--panel-glow);

    /* Glassmorphism effect */
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);

    /* Subtle glow effect */
    box-shadow:
        0 4px 20px rgba(0, 0, 0, 0.3),
        0 1px 0 rgba(255, 255, 255, 0.05) inset,
        0 0 30px rgba(212, 175, 55, 0.05);

    /* Sticky inside layout-main */
    position: sticky;
    top: 0;
    z-index: 300;
    margin-bottom: 25px;

    display: flex;
    justify-content: center; /* Center the grid container */
    align-items: center;

    /* Animation Init State (Desktop: Slide Down) */
    transform: translateY(-100%);
    transition: transform 0.5s cubic-bezier(0.25, 0.8, 0.25, 1),
                border-color 0.3s ease,
                box-shadow 0.3s ease;
}

.folder-tabs-bar.slide-down {
    transform: translateY(0);
}

/* DNA-driven panel accent colors */
.folder-tabs-bar[data-active-dna="business"] {
    --panel-glow: var(--color-gold);
    border-bottom-color: var(--color-gold);
    box-shadow:
        0 4px 20px rgba(0, 0, 0, 0.3),
        0 0 30px rgba(212, 175, 55, 0.08);
}

.folder-tabs-bar[data-active-dna="ecosystem"] {
    --panel-glow: var(--color-blue);
    border-bottom-color: var(--color-blue);
    box-shadow:
        0 4px 20px rgba(0, 0, 0, 0.3),
        0 0 30px rgba(48, 105, 152, 0.1);
}

.folder-tabs-bar[data-active-dna="rnd"] {
    --panel-glow: var(--color-green);
    border-bottom-color: var(--color-green);
    box-shadow:
        0 4px 20px rgba(0, 0, 0, 0.3),
        0 0 30px rgba(39, 201, 63, 0.08);
}

/* GRID CONTAINER FOR TABS (Synced with Project Grid) */
.tabs-inner-container {
    width: 100%;
    height: 100%;
    padding: 0 25px; /* Matches container padding if any, or visual inset */

    /* GRID SETUP: 12 Columns Base */
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    /* Fluid gap synced with .island-grid */
    gap: clamp(15px, 2vw, 25px);
    align-items: center;
}

/* ============================================
   1.1 BREADCRUMB PATH INDICATOR
   SYSTEM_ROOT > PORTFOLIO > [CATEGORY]
   ============================================ */
.folder-path {
    /* SPAN LOGIC: Always 2 columns */
    grid-column: span 2;

    font-family: 'JetBrains Mono', monospace;
    font-size: 0.75rem;
    color: var(--color-ghost);

    /* Remove fixed margins, let grid gap handle spacing */
    margin-right: 0;
    padding-right: 0;

    display: flex;
    align-items: center;
    gap: 6px;
    white-space: nowrap;
    overflow: hidden; /* Prevent spill */
}

.folder-path .icon {
    font-size: 1rem;
    opacity: 0.8;
}

/* Breadcrumb separator */
.folder-path .path-sep {
    color: var(--color-ghost);
    opacity: 0.5;
    margin: 0 2px;
}

/* Active category in breadcrumb */
.folder-path .path-active {
    color: var(--panel-glow, var(--color-gold));
    font-weight: 700;
}

/* ============================================
   1.2 FILE TABS (Enhanced)
   ============================================ */
.file-tab {
    /* SPAN LOGIC: Always 2 columns */
    grid-column: span 2;
    width: 100%; /* Fill the grid cell */

    font-family: 'JetBrains Mono', monospace;
    font-size: 0.8rem;
    color: var(--color-ghost);
    text-decoration: none;

    display: flex;
    align-items: center;
    justify-content: center; /* Center content in the cell */
    gap: 8px;

    /* Remove fixed padding, use vertical only */
    padding: 8px 0;

    border-radius: 6px;
    transition: all 0.2s ease;
    opacity: 0.7;
    border: 1px solid transparent;
    position: relative;
}

.file-tab:hover {
    background: rgba(255, 255, 255, 0.08);
    color: var(--color-ivory);
    opacity: 1;
}

.file-tab.active {
    background: rgba(255, 255, 255, 0.1);
    color: var(--color-ivory);
    opacity: 1;
    border-color: rgba(255, 255, 255, 0.15);
}

/* Active indicator line */
.file-tab.active::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 50%;
    transform: translateX(-50%);
    width: 60%;
    height: 2px;
    background: var(--panel-glow, var(--color-gold));
    border-radius: 1px;
}

.file-tab .icon.gold { color: var(--color-gold); }
.file-tab .icon.blue { color: var(--color-blue); }
.file-tab .icon.green { color: var(--color-green); }
.file-tab .icon.purple { color: #c678dd; }
.file-tab .icon.ghost { color: var(--color-ghost); }


/* ============================================
   2. CONTENT CONTAINER & ANIMATIONS
   ============================================ */
/* Visual Cleanup: Remove side borders from layout-main on portfolio page */
.page-portfolio .layout-main {
    border-left: none;
    border-right: none;

    /* FIX: Remove height and overflow constraints */
    height: auto !important;
    min-height: 100vh;
    overflow: visible !important;

    /* FIX: Switch to relative positioning and RESET centering */
    position: relative !important;
    top: 0 !important;
    bottom: auto !important;
    left: auto !important;
    transform: none !important;

    /* FIX: Use margin auto for centering relative block */
    margin: var(--header-total-h) auto 0 auto !important;
}

.portfolio-container {
    position: relative;
    min-height: 60vh;
    overflow: visible;
    padding-bottom: 80px;
    /* Ensure no global grid background here */
    background: none;
    /* FIX: Remove height and overflow constraints */
    height: auto !important;
    /* FIX: Restore padding */
    padding-left: 20px;
    padding-right: 20px;
}

/* Wrapper for sections */
.islands-wrapper {
    position: relative;
    width: 100%; /* Fix: Ensure full width */
    display: block; /* Fix: Ensure block display */
    padding: 0; /* Fix: Remove padding */
    min-height: 400px;
}

.island-section {
    display: none;
    width: 100%;
    transition: opacity 0.3s ease, transform 0.3s ease;
    opacity: 0;
    transform: translateY(20px);

    /* CRITICAL: Override DNA borders for sections (Visual Cleanup) */
    border: none !important;
    background: transparent !important;
    backdrop-filter: none !important;
}

.island-section.active {
    display: block;
    opacity: 1;
    transform: translateY(0);
}

/* Animation States */
.island-section.fade-out {
    opacity: 0;
    transform: translateY(20px);
}

.island-section.fade-in {
    opacity: 0;
    transform: translateY(20px);
}


/* ============================================
   3. BENTO GRID SYSTEM FOR PORTFOLIO
   Unlimited vertical expansion, container-query cards
   ============================================ */

.island-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding-bottom: 15px;
    margin-bottom: 25px;
    border-bottom: none;
}

.island-title {
    font-family: 'JetBrains Mono', monospace;
    font-size: 1.1rem;
    font-weight: 700;
    letter-spacing: -0.02em;
    color: var(--color-ivory);
    display: flex;
    align-items: center;
    gap: 10px;
}

.island-counter {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.7rem;
    color: var(--color-ghost);
    background: rgba(255,255,255,0.04);
    padding: 5px 10px;
    border-radius: 4px;
    border: none;
}

/* ============================================
   3.1 BENTO GRID (Portfolio Version)
   12-column grid, unlimited rows
   ============================================ */
.island-grid {
    display: grid;
    /* 12-column base grid for flexibility */
    grid-template-columns: repeat(12, 1fr);
    /* Auto rows - unlimited vertical expansion */
    grid-auto-rows: minmax(180px, auto);
    /* Fluid gap - SYNCED with .tabs-inner-container */
    gap: clamp(15px, 2vw, 25px);
    width: 100%;
}

/* Default card span: 4 columns (3 cards per row) */
.island-grid .project-card {
    grid-column: span 4;
}

/* REMOVED: Old nth-child logic to avoid conflicts with explicit classes */

/* Helper classes for height */
.height-x1 { grid-row: span 1; }
.height-x2 { grid-row: span 2; }

/* ============================================
   3.2 PROJECT CARD (Bento-Enhanced)
   Container Query enabled, visual cleanup
   ============================================ */
.project-card {
    position: relative;
    /* Cleaner, lighter background */
    background: rgba(35, 35, 50, 0.5);
    /* Subtle border - not heavy */
    border: 1px solid rgba(255, 255, 255, 0.04);
    border-radius: 14px;
    padding: clamp(18px, 2.5vw, 28px);
    display: flex;
    flex-direction: column;
    justify-content: space-between; /* Fix: Bento Volume */
    text-decoration: none;
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    overflow: hidden;
    min-height: 400px; /* Fix: Bento Volume */
    z-index: 1;

    /* Container Query: Enable for adaptive content */
    container-type: inline-size;
    container-name: card;
}

.project-card:hover {
    transform: translateY(-4px);
    background: rgba(40, 40, 55, 0.7);
    border-color: var(--theme-color, rgba(255, 255, 255, 0.1));
    box-shadow:
        0 12px 40px rgba(0, 0, 0, 0.25),
        0 0 0 1px rgba(255, 255, 255, 0.03);
}

/* Hover effects */
.project-card:hover .card-bg {
    opacity: 0.08;
}

.project-card:hover .card-type {
    color: var(--theme-color, var(--color-blue));
}

.project-card:hover .card-title {
    color: #ffffff;
}

/* ============================================
   3.3 PORTFOLIO THEME COLORS
   DNA-driven via section data-dna attribute
   ============================================ */
.theme-gold { --theme-color: var(--color-gold); }
.theme-blue { --theme-color: var(--color-blue); }
.theme-rnd { --theme-color: var(--color-green); }
.theme-proto { --theme-color: #c678dd; }
.theme-config { --theme-color: var(--color-ghost); }

/* Island title inherits theme color */
.theme-gold .island-title span:first-child { color: var(--color-gold); }
.theme-blue .island-title span:first-child { color: var(--color-blue); }
.theme-rnd .island-title span:first-child { color: var(--color-green); }
.theme-proto .island-title span:first-child { color: #c678dd; }
.theme-config .island-title span:first-child { color: var(--color-ghost); }

/* Counter badge - no borders, just subtle text color inherit */
.theme-gold .island-counter { color: rgba(212, 175, 55, 0.7); }
.theme-blue .island-counter { color: rgba(48, 105, 152, 0.8); }
.theme-rnd .island-counter { color: rgba(39, 201, 63, 0.7); }
.theme-proto .island-counter { color: rgba(198, 120, 221, 0.7); }
.theme-config .island-counter { color: rgba(255, 255, 255, 0.4); }


/* --- 4. EMPTY STATE --- */
.empty-state {
    height: 60vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    color: var(--color-ghost);
    font-family: 'JetBrains Mono', monospace;
    text-align: center;
}
.empty-icon { font-size: 3rem; margin-bottom: 20px; opacity: 0.3; }

/* --- 5. LOAD MORE BUTTON (Hidden by default) --- */
.load-more-btn {
    display: none; /* JS will show it */
    width: 100%;
    padding: 15px;
    margin-top: 20px;
    background: rgba(255,255,255,0.05);
    border: 1px dashed rgba(255,255,255,0.1);
    color: var(--color-ghost);
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.8rem;
    cursor: pointer;
    text-align: center;
    border-radius: 8px;
    transition: all 0.2s;
}

.load-more-btn:hover {
    background: rgba(255,255,255,0.1);
    color: var(--color-ivory);
    border-color: var(--color-gold);
}


/* ============================================
   6. RESPONSIVE BENTO ADAPTATIONS
   ============================================ */

/* LARGE SCREENS (1920px+) - 16 COLUMN GRID */
@media (min-width: 1920px) {
    .tabs-inner-container,
    .island-grid {
        grid-template-columns: repeat(16, 1fr);
    }

    /* Adaptive Sizes (L) */
    .size-s { grid-column: span 2; }
    .size-m { grid-column: span 4; }
    .size-l { grid-column: span 6; }

    /* Adjust spans for 16 cols if needed, or keep them as is */
    /* Tabs (span 2) will take 12 cols total (6 items), leaving 4 empty */
    /* Cards (span 4) will fit 4 per row (16/4 = 4) */
}

/* LAPTOP (1280px+) - 12 COLUMN GRID */
@media (min-width: 1280px) and (max-width: 1919px) {
    .island-grid {
        grid-template-columns: repeat(12, 1fr);
    }

    /* Adaptive Sizes (M) */
    .size-s { grid-column: span 3; }
    .size-m { grid-column: span 4; }
    .size-l { grid-column: span 6; }
}

/* TABLET LANDSCAPE (1024px - 1279px) */
@media (min-width: 1024px) and (max-width: 1279px) {
    /* 8-column grid for tablet landscape */
    .island-grid {
        grid-template-columns: repeat(8, 1fr);
        grid-auto-rows: minmax(150px, auto);
    }

    /* Adaptive Sizes (M - Tablet Landscape) */
    /* Reuse logic or adjust slightly */
    .size-s { grid-column: span 4; } /* 2 per row */
    .size-m { grid-column: span 4; } /* 2 per row */
    .size-l { grid-column: span 8; } /* Full width */

    .island-grid .project-card {
        grid-column: span 4; /* 2 per row */
    }

    /* REMOVED: Old nth-child logic */

    h1 {
        font-size: 2.2rem;
    }

    .folder-tabs-bar {
        height: 45px;
    }

    .file-tab {
        padding: 6px 10px;
        font-size: 0.75rem;
    }

    .project-card {
        padding: 18px;
    }

    .portfolio-container {
        overflow-y: auto;
        padding-bottom: 60px;
    }
}

/* DESKTOP ANIMATIONS (Slide Left/Right) */
@media (min-width: 1024px) {
    .island-section.slide-out-left {
        display: block;
        position: absolute;
        top: 0; left: 0;
        opacity: 0;
        transform: translateX(-50px);
        pointer-events: none;
    }

    .island-section.slide-out-right {
        display: block;
        position: absolute;
        top: 0; left: 0;
        opacity: 0;
        transform: translateX(50px);
        pointer-events: none;
    }

    .island-section.slide-in-right {
        display: block;
        opacity: 0;
        transform: translateX(50px);
    }

    .island-section.slide-in-left {
        display: block;
        opacity: 0;
        transform: translateX(-50px);
    }
}

/* MOBILE & TABLET PORTRAIT (< 1023px) */
@media (max-width: 1023px) {
    /* --- VERTICAL TABS LAYOUT --- */

    /* 1. Main Layout: Grid (Content | Tabs) */
    .layout-main {
        display: grid;
        grid-template-columns: 1fr 55px; /* Content | Tabs */
        gap: 0;
        padding: 0;
        overflow: visible;
        top: 50px;
        margin-top: 0;
        min-height: calc(100vh - 50px);
        height: auto;
    }

    /* 2. Tabs Bar: Vertical, Right Side - GLASSMORPHISM */
    .folder-tabs-bar {
        grid-column: 2;
        grid-row: 1;
        width: 55px;
        height: 100%;
        position: sticky;
        top: 0;
        right: 0;

        flex-direction: column;
        justify-content: flex-start;
        padding: 20px 0;

        /* Glassmorphism: Lighter, premium feel */
        background: rgba(45, 45, 60, 0.7);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);

        border-bottom: none;
        border-left: 1px solid rgba(255, 255, 255, 0.08);

        /* Subtle inner glow */
        box-shadow:
            inset 1px 0 0 rgba(255, 255, 255, 0.05),
            -4px 0 20px rgba(0, 0, 0, 0.2);

        overflow: hidden;

        /* Mobile Animation: Slide from Right */
        transform: translateX(100%);
        transition: transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
    }

    .folder-tabs-bar.slide-down {
        transform: translateX(0);
    }

    .tabs-inner-container {
        /* Reset Grid for Mobile Vertical Layout */
        display: flex;
        flex-direction: column;
        width: 100%;
        height: auto;
        padding: 0;
        gap: 12px;
        align-items: center;
    }

    /* Hide Path & Text on mobile */
    .folder-path { display: none; }
    .file-tab span:last-child { display: none; }
    .file-tab::after { display: none; } /* Hide active indicator */

    /* Tab Icons - Circular style */
    .file-tab {
        width: 40px;
        height: 40px;
        padding: 0;
        justify-content: center;
        border-radius: 10px;
        background: transparent;
        border: 1px solid transparent;
        transition: all 0.2s ease;
    }

    .file-tab .icon {
        font-size: 1.1rem;
        margin: 0;
    }

    .file-tab:hover {
        background: rgba(255, 255, 255, 0.08);
    }

    .file-tab.active {
        background: rgba(255, 255, 255, 0.1);
        border-color: var(--theme-color, rgba(255, 255, 255, 0.15));
        box-shadow: 0 0 15px rgba(255, 255, 255, 0.05);
    }

    /* 3. Content Area: Left Side */
    .portfolio-container {
        grid-column: 1;
        grid-row: 1;
        padding: 15px;
        overflow-y: visible;
        height: auto;
        padding-bottom: 80px;
        padding-top: 15px;
    }

    /* Page Title */
    .portfolio-container > div:first-child {
        margin-top: 0;
        margin-bottom: 15px;
    }

    h1 {
        font-size: 1.6rem;
        margin-bottom: 5px;
    }

    .text-ghost.font-mono {
        font-size: 0.75rem;
    }

    /* BENTO GRID: 2-Column on Mobile */
    .island-grid {
        grid-template-columns: repeat(2, 1fr);
        grid-auto-rows: minmax(120px, auto);
        gap: clamp(10px, 2.5vw, 15px);
    }

    /* All cards span 1 column by default */
    .island-grid .project-card {
        grid-column: span 1;
    }

    /* REMOVED: Old nth-child logic */

    .project-card {
        padding: clamp(12px, 3vw, 18px);
        border-radius: 10px;
    }

    .card-header {
        margin-bottom: 8px;
    }

    .card-title {
        font-size: clamp(0.9rem, 3.5cqw, 1.1rem);
        margin-bottom: 6px;
    }

    .card-desc {
        font-size: 0.75rem;
        margin-bottom: 10px;
        line-height: 1.4;
    }

    .tech-tag {
        font-size: 0.6rem;
        padding: 3px 6px;
    }

    /* Island header compact */
    .island-header {
        margin-bottom: 15px;
        padding-bottom: 10px;
    }

    .island-title {
        font-size: 0.95rem;
    }

    .island-counter {
        font-size: 0.6rem;
        padding: 3px 6px;
    }

    /* Animation */
    .island-section {
        transition: opacity 0.3s ease, transform 0.3s ease;
    }

    .island-section.mobile-fade-in {
        animation: portfolioFadeIn 0.4s ease forwards;
    }

    @keyframes portfolioFadeIn {
        from { opacity: 0; transform: translateY(15px); }
        to { opacity: 1; transform: translateY(0); }
    }
}

/* --- TABLET PORTRAIT SPECIFIC (768px - 1023px) --- */
@media (min-width: 768px) and (max-width: 1023px) {
    /* Adjust Layout Main for 80px Header */
    .layout-main {
        top: 80px;
        min-height: calc(100vh - 80px);
        height: auto;
    }

    /* 4-column grid for tablet portrait */
    .island-grid {
        grid-template-columns: repeat(4, 1fr);
        grid-auto-rows: minmax(140px, auto);
        gap: 18px;
    }

    /* Adaptive Sizes (S - Tablet Portrait) */
    .size-s { grid-column: span 4; } /* Full width or 2? Let's say 4 for now based on prev logic */
    .size-m { grid-column: span 4; }
    .size-l { grid-column: span 8; } /* Wait, grid is 4 cols. So span 4 is max */

    /* Corrected for 4-col grid */
    .size-s { grid-column: span 4; }
    .size-m { grid-column: span 4; }
    .size-l { grid-column: span 4; }

    .island-grid .project-card {
        grid-column: span 2;
    }

    /* REMOVED: Old nth-child logic */

    .project-card {
        padding: 20px;
    }

    h1 {
        font-size: 2rem;
    }
}

/* --- MOBILE (< 768px) --- */
@media (max-width: 767px) {
    /* 4-column grid logic (but visually 1 or 2 cols) */
    /* Actually mobile grid is defined as repeat(2, 1fr) above in max-width: 1023px block */
    /* Let's refine for < 768px specifically if needed */

    /* Adaptive Sizes (XS - Mobile) */
    .size-s { grid-column: span 4; } /* Full width relative to 4-col concept, but here grid is 2-col */
    /* If grid is 2-col: */
    .size-s { grid-column: span 2; }
    .size-m { grid-column: span 2; }
    .size-l { grid-column: span 2; }
}

/* --- HEIGHT ADAPTATION (Mobile Vertical) --- */

/* Short Phones (< 740px) */
@media (max-height: 740px) and (max-width: 767px) {
    .project-card {
        padding: 10px;
    }

    .card-desc {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .tabs-inner-container {
        gap: 8px;
    }

    .file-tab {
        width: 36px;
        height: 36px;
    }

    .project-card.hidden-mobile {
        display: none;
    }
}

/* Tall Phones (> 840px) */
@media (min-height: 841px) and (max-width: 767px) {
    .project-card {
        padding: 18px;
    }

    .card-desc {
        -webkit-line-clamp: 4;
    }
}

/* --- NARROW PHONES (< 400px) --- */
@media (max-width: 400px) {
    /* Single column for very narrow screens */
    .island-grid {
        grid-template-columns: 1fr;
    }

    .island-grid .project-card,
    .island-grid .project-card:first-child,
    .island-grid .project-card:nth-child(4n) {
        grid-column: span 1;
    }

    .card-title {
        font-size: 0.95rem;
    }

    .card-type {
        font-size: 0.6rem;
    }

    .tech-tag {
        font-size: 0.55rem;
        padding: 2px 5px;
    }

    .card-header {
        flex-wrap: wrap;
    }
}
