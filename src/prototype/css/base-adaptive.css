/* src/prototype/css/base-adaptive.css */
/* ADAPTIVE STYLES FOR BASE LAYOUT (Header, Footer, Container) */

/* ============================================
   MEDIUM DESKTOP: 1441px - 1920px (Full HD included)
   Full HD и промежуточные разрешения
   Ширина фиксирована 1440px (для рамок и зума)
   Уменьшаем элементы на 10-15% для воздушности
   ============================================ */
@media (min-width: 1441px) and (max-width: 1920px) {
    :root {
        /* FIX: Changed from 85% to 1440px for better Zoom support */
        --max-width: 1440px;

        /* FIX: Reduced heights for Medium Desktop */
        --header-total-h: 8vh;
        --footer-h: 4vh;
    }

    /* --- HEADER ADAPTATION --- */

    .layout-header {
        /* FIX: Reduced min-height to allow shrinking on shorter screens */
        min-height: 70px;
    }

    /* FIX: Top Bar takes 20% instead of 25% in this range */
    .layout-header-top {
        height: 20%;
        padding: 0 30px; /* Less padding */
    }

    /* Logo */
    #brand-logo {
        font-size: 1.9rem; /* Was 2.2rem */
    }
    #brand-slogan {
        font-size: 1.2rem; /* Was 1.4rem */
    }

    /* Tabs */
    .nav-link {
        font-size: 0.75rem; /* Was 0.85rem */
        padding: 6px 12px;  /* Was 8px 15px */
    }
    .code-icon {
        font-size: 0.75rem; /* Was 0.85rem */
    }

    /* --- FOOTER ADAPTATION --- */
    .layout-footer {
        padding: 0 15px;
        font-size: 0.7rem; /* Was 0.75rem */
        /* Ensure min-height matches visual balance if 4vh is too small */
        min-height: 45px !important;
    }

    .btn-icon {
        font-size: 1.2rem; /* Was 1.4rem */
    }

    .btn-label {
        font-size: 0.7rem; /* Was 0.75rem */
    }
}

/* ============================================
   STANDARD LAPTOP (1366x768 Optimized): 1280px - 1440px
   Классика ноутбуков. Мало вертикали.
   Ширина 100%. Компактный хедер и футер.
   ============================================ */
@media (min-width: 1280px) and (max-width: 1440px) {

    :root {
        --max-width: 100%; /* Full width */
        /* FIX: Use vh but respect min-heights below */
        --header-total-h: 10vh;
        --footer-h: 5vh;
    }

    /* Header: Compact for 768px height */
    .layout-header {
        min-height: 70px; /* Compact header */
    }

    /* Topbar: Ultra compact (Stylistic accent) */
    .layout-header-top {
        height: 20px;
        min-height: 20px;
        padding: 0 20px;
        font-size: 0.6rem; /* Smaller font */
    }

    /* Header Inner */
    .header-inner {
        padding: 0 15px;
        gap: 20px;
    }

    .brand {
        padding-left: 10px;
    }

    #brand-logo {
        font-size: 1.4rem; /* Smaller logo */
    }

    #brand-slogan {
        font-size: 0.9rem;
        margin-left: 10px;
    }

    .nav-link {
        padding: 5px 10px;
        font-size: 0.75rem;
    }

    .code-icon {
        font-size: 0.75rem;
    }

    .tab-close {
        margin-left: 5px;
        font-size: 0.9rem;
    }

    /* Footer: Compact */
    .layout-footer {
        padding: 0 15px;
        font-size: 0.7rem;
        /* FIX: Removed min-height override, using base (50px) */
    }

    .btn-icon {
        font-size: 1.1rem;
    }

    .btn-label {
        font-size: 0.65rem;
    }

    .footer-left .copyright-text {
        font-size: 0.65rem;
    }

    .lang-slider {
        padding: 3px 6px;
        width: 32px;
    }

    .lang-slider.expanded {
        width: 110px;
    }

    /* Drawer */
    .layout-drawer {
        /* bottom: 40px; */
    }

    .layout-drawer.open {
        height: 260px;
    }

    .drawer-section {
        padding: 25px;
    }

    .nav-grid {
        gap: 20px;
    }

    .nav-col h4 {
        font-size: 0.8rem;
        margin-bottom: 12px;
    }

    .nav-link-drawer {
        font-size: 0.95rem;
        margin-bottom: 8px;
    }
}

/* ============================================
   TABLET LANDSCAPE / SMALL LAPTOP: 1024px - 1279px
   Очень мало вертикали (600-800px).
   Максимальная компактность.
   ============================================ */
@media (min-width: 1024px) and (max-width: 1279px) {
    :root {
        --max-width: 100%;
        --header-total-h: 10vh; /* Will be limited by min-height */
        --footer-h: 5vh;
    }

    /* Header: Ultra Compact */
    .layout-header {
        min-height: 60px; /* Very compact */
    }

    .layout-header-top {
        height: 20px;
        min-height: 20px;
        padding: 0 15px;
        font-size: 0.6rem;
    }

    .header-inner {
        padding: 0 10px;
        gap: 15px;
    }

    /* Logo: Significantly smaller */
    #brand-logo {
        font-size: 1.2rem;
    }

    #brand-slogan {
        font-size: 0.8rem;
        margin-left: 8px;
    }

    /* Tabs: Compact */
    .nav-link {
        padding: 4px 8px;
        font-size: 0.7rem;
    }

    .code-icon {
        font-size: 0.7rem;
    }

    /* Footer: Ultra Compact */
    .layout-footer {
        min-height: 35px !important;
        padding: 0 10px;
        font-size: 0.65rem;
    }

    .btn-icon { font-size: 1rem; }
    .btn-label { font-size: 0.6rem; }
}

/* ============================================
   TABLET PORTRAIT: 768px - 1023px
   Переход на мобильную навигацию (Бургер), но сохранение "старшего" стиля
   ============================================ */
@media (min-width: 768px) and (max-width: 1023px) {
    :root {
        --max-width: 100%;
        --header-total-h: 80px; /* Fixed height for tablet */
        --footer-h: 50px;
    }

    /* Header */
    .layout-header {
        min-height: 80px;
    }

    .layout-header-top {
        height: 25px;
        padding: 0 20px;
    }

    .header-inner {
        padding: 0 20px;
        /* Switch to Flex for Burger layout */
        display: flex;
        justify-content: space-between;
    }

    /* Logo: Keep it relatively large */
    #brand-logo {
        font-size: 1.6rem;
    }

    #brand-slogan {
        display: none; /* Hide slogan to save space if needed, or keep small */
    }

    /* Navigation: HIDE TABS */
    .header-nav {
        display: none !important;
    }

    /* Burger: SHOW */
    .mobile-burger-btn {
        display: block !important;
        font-size: 2rem;
        color: var(--color-gold);
        cursor: pointer;
    }

    /* Footer */
    .layout-footer {
        padding: 0 20px;
    }

    /* --- CONTACTS ADAPTATION (TABLET) --- */
    .contact-card-layout {
        grid-template-columns: 1fr 1fr !important; /* 2 Columns */
        gap: 30px !important;
    }

    .contact-qr { display: none !important; } /* Hide QR */

    /* Profile takes 1 column */
    .contact-profile {
        justify-content: center;
    }

    /* Links take 1 column */
    .contact-links-grid {
        grid-template-columns: 1fr 1fr !important; /* 2x2 Grid inside column */
    }

    /* FIX: Removed margin-top for layout-main to avoid double spacing with top: 80px */
    /* .layout-main { margin-top: 80px !important; } */
}

/* ============================================
   MOBILE: < 768px
   Полная перестройка лейаута
   ============================================ */
@media (max-width: 767px) {

    /* А. ГЕОМЕТРИЯ СТРАНИЦЫ */
    body {
        background-color: #1E1E2F; /* Базовый цвет */
        background-image: none !important;
        overflow-x: hidden; /* Блокируем горизонтальный скролл */
    }

    /* Сброс рамок десктопа, НО ВОЗВРАЩАЕМ ФИКСАЦИЮ */
    .layout-header, .layout-footer {
        width: 100% !important;
        max-width: 100% !important;
        left: 0 !important;
        right: 0 !important;
        transform: none !important; /* FIX: Сброс translateX(-50%) с десктопа */
        border-radius: 0 !important;
        border: none !important;
        margin: 0 !important;
        position: fixed !important;
        z-index: 500 !important;
    }

    .layout-header { top: 0; }
    .layout-footer { bottom: 0; }

    .layout-main {
        position: relative !important;
        top: auto !important;
        bottom: auto !important;
        left: auto !important;
        transform: none !important;
        width: 100% !important;
        max-width: 100% !important;
        border: none !important;
        box-shadow: none !important;

        /* Стандартные отступы под fixed header/footer */
        margin-top: 50px !important;
        margin-bottom: 60px !important;

        /* Базовый внутренний padding (страницы могут переопределить) */
        padding: 10px !important;

        /* Минимальная высота контента */
        min-height: calc(100vh - 110px);

        /* Разрешаем скролл по умолчанию */
        overflow: visible !important;
    }

    /* Б. ХЕДЕР (Лого + Бургер) */
    .layout-header {
        height: 50px !important;
        min-height: 50px !important;
        max-height: 50px !important;
        padding: 0 15px !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        background-color: #1E1E2F !important;
        border-bottom: 1px solid rgba(255,255,255,0.1) !important;
        flex-direction: row !important; /* Вернуть в строку для мобилки */
    }

    /* Скрываем Top Bar на мобилке (или переносим) */
    .layout-header-top {
        display: none !important;
    }

    .header-inner {
        display: flex !important;
        width: 100% !important;
        height: 100% !important;
        justify-content: space-between !important;
        align-items: center !important;
        padding: 0 !important;
        gap: 0 !important;
        grid-template-columns: unset !important;
    }

    .header-nav { display: none !important; } /* Скрываем десктопное меню */

    .mobile-burger-btn {
        display: block !important;
        font-size: 1.8rem;
        color: var(--color-gold);
        cursor: pointer;
    }

    .brand { padding: 0 !important; width: auto !important; }
    #brand-text { font-size: 1.2rem !important; }

    /* Скрываем desktop drawer на мобилке */
    .layout-drawer {
        display: none !important;
    }

    /* Г. ФУТЕР (Пульт) */
    .layout-footer {
        height: 60px !important;
        padding: 0 20px !important;
        display: flex !important;
        justify-content: space-between !important;
        align-items: center !important;
        background-color: #151520 !important;
        border: none !important;
        border-top: 2px solid var(--color-gold) !important;
        min-height: 60px !important;
    }

    /* Стили элементов футера */
    .footer-left .copyright-text {
        font-family: 'JetBrains Mono', monospace;
        color: var(--color-ghost);
        font-size: 0.7rem;
    }

    /* Скрываем иконку файла, показываем копирайт */
    .footer-left .copyright-text .file-icon { display: none; }
    .footer-left .copyright-text::before {
        content: "© 2026 CodexDLC";
    }
    /* Скрываем оригинальный текст "home.html" */
    .footer-left .copyright-text {
        font-size: 0;
    }
    .footer-left .copyright-text::before {
        font-size: 0.7rem;
    }

    .footer-right {
        display: flex;
        gap: 15px;
        align-items: center;
    }

    .control-btn {
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--color-ivory);
        cursor: pointer;
    }

    /* Скрываем текст кнопок (NAVIGATION, CONTACTS), оставляем иконки */
    .btn-label { display: none !important; }
    .btn-icon { font-size: 1.4rem; }

    /* --- ЛОГИКА СЛАЙДЕРА ЯЗЫКА --- */
    .lang-slider {
        overflow: hidden;
        transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
        background: transparent;
        border: 1px solid transparent;
        border-radius: 4px;
        padding: 5px 10px;
        display: flex;
        align-items: center;
        /* Начальная ширина под текст "EN" */
        width: 40px;
        justify-content: center;
        white-space: nowrap;
    }

    .lang-slider.expanded {
        /* Ширина раскрытого состояния */
        width: 140px;
        background: rgba(255, 255, 255, 0.1);
        border-color: var(--color-gold);
        justify-content: space-between; /* Распределяем RU / DE / EN */
    }

    .lang-visible {
        font-family: 'JetBrains Mono';
        font-weight: bold;
        color: var(--color-ivory);
    }

    /* Скрытая часть (RU / DE) */
    .lang-hidden {
        display: flex;
        align-items: center;
        gap: 5px;
        opacity: 0;
        width: 0;
        transition: opacity 0.2s;
        pointer-events: none; /* Чтобы не кликать, пока закрыто */
    }

    .lang-slider.expanded .lang-hidden {
        opacity: 1;
        width: auto;
        pointer-events: auto;
        margin-right: 10px; /* Отступ от EN */
        order: -1; /* Ставим перед EN */
    }

    .lang-hidden span { cursor: pointer; color: var(--color-ghost); }
    .lang-hidden span:hover { color: var(--color-gold); }

    /* VISIBILITY UTILITIES */
    .desktop-only { display: none !important; }
    .mobile-only { display: block !important; }

    /* FIX: Allow bottom drawer on mobile */
    .bottom-drawer { display: block !important; }

    /* --- SYSTEM HUB & CONTACTS ADAPTATION (MOBILE) --- */

    /* Hub Grid: 1 Column */
    .hub-grid {
        grid-template-columns: 1fr !important;
        gap: 30px !important;
    }

    .hub-col {
        gap: 10px !important;
    }

    .hub-link.main-link {
        font-size: 1.2rem !important;
    }

    /* Contact Card: 1 Column */
    .contact-card-layout {
        grid-template-columns: 1fr !important;
        gap: 25px !important;
    }

    /* Hide QR on mobile */
    .contact-qr { display: none !important; }

    /* Links Grid: 1 Column */
    .contact-links-grid {
        grid-template-columns: 1fr !important;
    }

    .contact-btn {
        padding: 15px !important; /* Bigger touch area */
    }

    .profile-avatar {
        width: 60px !important;
        height: 60px !important;
    }
}

/* --- ЗАЩИТА: Скрываем мобильные шторки на Планшете и Десктопе --- */
@media (min-width: 768px) {
    .bottom-drawer { display: none !important; }
    .desktop-only { display: block !important; }
    .mobile-only { display: none !important; }
}

/* --- УЗКИЕ ТЕЛЕФОНЫ (< 425px) --- */
@media (max-width: 425px) {
    /* FIX: Increased logo size slightly */
    #brand-logo {
        font-size: 1.1rem !important;
    }

    #brand-slogan {
        font-size: 0.7rem !important;
    }
}

/* ============================================
   GLOBAL OVERLAY MENU STYLES (Available everywhere)
   ============================================ */
.glass-overlay {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(15, 15, 26, 0.6); /* Полупрозрачный фон */
    backdrop-filter: blur(15px); /* Эффект стекла */
    -webkit-backdrop-filter: blur(15px);
    z-index: 999;

    display: flex;
    justify-content: center;
    align-items: center;

    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
}

.glass-overlay.active {
    opacity: 1;
    pointer-events: auto;
}

.overlay-close {
    position: absolute;
    top: 20px; right: 20px;
    font-size: 2rem;
    color: var(--color-gold);
    cursor: pointer;
}

/* --- СТИЛИ ДЛЯ МЕНЮ (DESKTOP LOOK) --- */
.overlay-nav {
    display: flex;
    flex-direction: column;
    align-items: flex-start; /* Выравнивание по левому краю (как код) */
    gap: 25px;
    padding-left: 20px; /* Небольшой отступ слева */
}

.overlay-btn {
    font-family: 'JetBrains Mono', monospace; /* Шрифт IDE */
    font-size: 2rem; /* Крупно для пальца */
    font-weight: 700;
    text-decoration: none;
    color: var(--color-ivory);
    display: flex;
    align-items: center;
    gap: 15px; /* Отступ между значком и текстом */
    transition: transform 0.2s;
}

.overlay-btn:active {
    transform: scale(0.95); /* Эффект нажатия */
}

/* Цвета скобочек (Как в IDE) */
.overlay-btn .sym { font-weight: normal; opacity: 0.9; }
.overlay-btn .sym.red   { color: #ff5f56; } /* Красный */
.overlay-btn .sym.gold  { color: var(--color-gold); } /* Желтый */
.overlay-btn .sym.blue  { color: var(--color-blue); } /* Синий */
.overlay-btn .sym.green { color: #2ecc71; } /* Зеленый */

.overlay-btn .txt {
    text-transform: uppercase;
    letter-spacing: 1px;
}

/* --- IDE TREE STYLE (Mobile Menu) --- */
.overlay-nav.ide-tree {
    align-items: stretch;
    gap: 5px;
    padding-left: 0;
    width: 100%;
    max-width: 280px;
}

/* Папка (раскрывающаяся) */
.nav-folder-group {
    display: flex;
    flex-direction: column;
}

.overlay-folder {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 15px;
    cursor: pointer;
    border-radius: 6px;
    transition: background 0.2s;
}

.overlay-folder:hover {
    background: rgba(255, 255, 255, 0.05);
}

.overlay-folder .folder-icon {
    font-size: 1.2rem;
}

.overlay-folder .folder-name {
    font-family: 'JetBrains Mono', monospace;
    font-size: 1.1rem;
    color: var(--color-ivory);
    flex: 1;
}

.overlay-folder .folder-arrow {
    font-size: 0.8rem;
    color: var(--color-ghost);
    transition: transform 0.2s;
}

/* Папка открыта */
.nav-folder-group.open .overlay-folder .folder-arrow {
    transform: rotate(90deg);
}

/* Дочерние файлы (скрыты по умолчанию) */
.folder-children {
    display: none;
    flex-direction: column;
    padding-left: 25px;
    margin-top: 5px;
    border-left: 1px solid rgba(255, 255, 255, 0.1);
    margin-left: 20px;
}

.nav-folder-group.open .folder-children {
    display: flex;
}

/* Файл в меню */
.overlay-file {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 15px;
    text-decoration: none;
    border-radius: 6px;
    transition: background 0.2s;
}

.overlay-file:hover {
    background: rgba(255, 255, 255, 0.05);
}

.overlay-file:active {
    transform: scale(0.98);
}

.overlay-file.active {
    background: rgba(48, 105, 152, 0.2);
    border-left: 2px solid var(--color-blue);
}

.overlay-file .file-icon {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.75rem;
    font-weight: 700;
    padding: 2px 6px;
    border-radius: 3px;
    background: rgba(255, 255, 255, 0.1);
}

.overlay-file .file-icon.blue { color: #61AFEF; }
.overlay-file .file-icon.gold { color: var(--color-gold); }
.overlay-file .file-icon.green { color: var(--color-green); }
.overlay-file .file-icon.ghost { color: var(--color-ghost); }

.overlay-file .file-name {
    font-family: 'JetBrains Mono', monospace;
    font-size: 1rem;
    color: var(--color-ivory);
}
